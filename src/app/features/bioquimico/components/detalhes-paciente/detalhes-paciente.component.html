<div class="detalhes-paciente">
  <div class="page-header">
    <div>
      <button class="btn-back" (click)="voltar()">
        <span class="icon">←</span> Voltar
      </button>
      <h1>Detalhes do Paciente</h1>
    </div>
    <button class="btn btn-primary" (click)="editar()" *ngIf="paciente">
      <span class="icon">✎</span> Editar
    </button>
  </div>

  <div class="loading-spinner" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Carregando...</p>
  </div>

  <div class="error-message" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>

  <div class="detalhes-card" *ngIf="paciente && !isLoading">
    <!-- Dados Pessoais -->
    <div class="section">
      <h2 class="section-title">Dados Pessoais</h2>
      <div class="info-grid">
        <div class="info-item">
          <label>Nome Completo</label>
          <p>{{ paciente.nome }}</p>
        </div>
        
        <div class="info-item">
          <label>CPF</label>
          <p>{{ paciente.cpf | cpf }}</p>
        </div>
        
        <div class="info-item" *ngIf="paciente.cns">
          <label>CNS</label>
          <p>{{ paciente.cns | cns }}</p>
        </div>
        
        <div class="info-item">
          <label>Sexo</label>
          <p>{{ paciente.sexo === 'M' ? 'Masculino' : 'Feminino' }}</p>
        </div>
        
        <div class="info-item">
          <label>Data de Nascimento</label>
          <p>{{ paciente.dataNascimento | date: 'dd/MM/yyyy' }}</p>
        </div>
        
        <div class="info-item">
          <label>Idade</label>
          <p>{{ calcularIdade(paciente.dataNascimento) }} anos</p>
        </div>
      </div>
    </div>

    <!-- Contato -->
    <div class="section">
      <h2 class="section-title">Contato</h2>
      <div class="info-grid">
        <div class="info-item">
          <label>Telefone</label>
          <p>{{ paciente.telefone | telefone }}</p>
        </div>
        
        <div class="info-item" *ngIf="paciente.email">
          <label>E-mail</label>
          <p>{{ paciente.email }}</p>
        </div>
      </div>
    </div>

    <!-- Endereço -->
    <div class="section">
      <h2 class="section-title">Endereço</h2>
      <div class="info-grid">
        <div class="info-item">
          <label>CEP</label>
          <p>{{ paciente.endereco.cep.substring(0, 5) }}-{{ paciente.endereco.cep.substring(5) }}</p>
        </div>
        
        <div class="info-item full-width">
          <label>Logradouro</label>
          <p>{{ paciente.endereco.logradouro }}, {{ paciente.endereco.numero }}</p>
        </div>
        
        <div class="info-item" *ngIf="paciente.endereco.complemento">
          <label>Complemento</label>
          <p>{{ paciente.endereco.complemento }}</p>
        </div>
        
        <div class="info-item">
          <label>Bairro</label>
          <p>{{ paciente.endereco.bairro }}</p>
        </div>
        
        <div class="info-item">
          <label>Cidade</label>
          <p>{{ paciente.endereco.cidade }}</p>
        </div>
        
        <div class="info-item">
          <label>Estado</label>
          <p>{{ paciente.endereco.estado }}</p>
        </div>
      </div>
    </div>

    <!-- Informações do Sistema -->
    <div class="section">
      <h2 class="section-title">Informações do Sistema</h2>
      <div class="info-grid">
        <div class="info-item">
          <label>Status</label>
          <p>
            <span class="badge" [class.badge-success]="paciente.ativo" [class.badge-danger]="!paciente.ativo">
              {{ paciente.ativo ? 'Ativo' : 'Inativo' }}
            </span>
          </p>
        </div>
        
        <div class="info-item">
          <label>Primeiro Acesso</label>
          <p>
            <span class="badge" [class.badge-warning]="paciente.primeiroAcesso" [class.badge-info]="!paciente.primeiroAcesso">
              {{ paciente.primeiroAcesso ? 'Pendente' : 'Concluído' }}
            </span>
          </p>
        </div>
        
        <div class="info-item">
          <label>Cadastrado em</label>
          <p>{{ getDataCriacao() | date: 'dd/MM/yyyy HH:mm' }}</p>
        </div>
        
        <div class="info-item">
          <label>Última atualização</label>
          <p>{{ getDataAtualizacao() | date: 'dd/MM/yyyy HH:mm' }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
