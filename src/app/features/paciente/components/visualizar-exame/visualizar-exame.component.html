<div class="visualizar-exame-container">
  <!-- Bot√µes de a√ß√£o (n√£o imprime) -->
  <div class="actions-header no-print">
    <button class="btn-back" (click)="voltar()">
      ‚Üê Voltar
    </button>
    
    <div class="action-buttons">
      <button class="btn-download" (click)="baixarPDF()">
        üìÑ Baixar PDF
      </button>
    </div>
  </div>

  <!-- Mensagem de erro -->
  <div class="alert alert-error no-print" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>

  <!-- Loading -->
  <div class="loading-container no-print" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Carregando exame...</p>
  </div>

  <!-- Conte√∫do do exame -->
  <div class="exame-content" *ngIf="!isLoading && exame">
    <!-- Cabe√ßalho -->
    <div class="exame-header">
      <div class="header-info">
        <div class="instituicao-principal">
          <h1>Prefeitura Municipal de Riacho de Santo Ant√¥nio</h1>
          <h2>Secretaria de Sa√∫de</h2>
          <h3>Laborat√≥rio de An√°lises Cl√≠nicas</h3>
        </div>
        
        <div class="instituicao-secundaria">
          <p class="nome-unidade">Policl√≠nica Severino Mineiro da Costa</p>
          <p class="cnes">CNES: 7956444</p>
          <p class="endereco">Rua Principal, Centro - Riacho de Santo Ant√¥nio/PB</p>
        </div>
      </div>
      
      <div class="logo-container">
        <img src="images/logo-prefeitura.png" alt="Logo da Prefeitura" class="logo-prefeitura">
      </div>
    </div>

    <div class="titulo-exame">
      <h2>{{ exame.exameNome }}</h2>
      <p class="codigo">C√≥digo: {{ exame.codigo }}</p>
    </div>

    <!-- Informa√ß√µes do Paciente -->
    <div class="section">
      <h3 class="section-title">Dados do Paciente</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Nome:</span>
          <span class="value">{{ exame.pacienteNome }}</span>
        </div>
        <div class="info-item">
          <span class="label">CPF:</span>
          <span class="value">{{ exame.pacienteCpf }}</span>
        </div>
        <div class="info-item" *ngIf="exame.pacienteCns">
          <span class="label">CNS:</span>
          <span class="value">{{ exame.pacienteCns }}</span>
        </div>
      </div>
    </div>

    <!-- Informa√ß√µes do Exame -->
    <div class="section">
      <h3 class="section-title">Informa√ß√µes do Exame</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Data da Coleta:</span>
          <span class="value">{{ formatarData(exame.dataColeta) }}</span>
        </div>
        <div class="info-item" *ngIf="exame.dataLiberacao">
          <span class="label">Data da Libera√ß√£o:</span>
          <span class="value">{{ formatarData(exame.dataLiberacao) }}</span>
        </div>
        <div class="info-item">
          <span class="label">Profissional Respons√°vel:</span>
          <span class="value">{{ exame.profissionalNome }}</span>
        </div>
        <div class="info-item">
          <span class="label">Status:</span>
          <span class="value">
            <span class="badge" [ngClass]="'badge-' + exame.status">
              {{ exame.status }}
            </span>
          </span>
        </div>
      </div>
    </div>

    <!-- Resultados -->
    <div class="section">
      <h3 class="section-title">Resultados</h3>
      
      <div *ngFor="let grupo of parametrosAgrupados" class="grupo-parametros">
        <h4 class="grupo-titulo">{{ grupo.grupo }}</h4>
        
        <table class="resultados-table">
          <thead>
            <tr>
              <th>Par√¢metro</th>
              <th>Resultado</th>
              <th>Unidade</th>
              <th>Valor de Refer√™ncia</th>
              <th class="text-center">Interpreta√ß√£o</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let parametro of grupo.parametros">
              <td><strong>{{ parametro.nome }}</strong></td>
              <td class="valor-resultado">{{ parametro.valor }}</td>
              <td>{{ parametro.unidade }}</td>
              <td class="valor-referencia">{{ parametro.valorReferencia }}</td>
              <td class="text-center">
                <span 
                  class="interpretacao-badge" 
                  [ngClass]="getInterpretacaoClass(parametro.interpretacao)"
                >
                  <span class="icon">{{ getInterpretacaoIcon(parametro.interpretacao) }}</span>
                  {{ parametro.interpretacao }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Observa√ß√µes -->
    <div class="section" *ngIf="exame.observacoes">
      <h3 class="section-title">Observa√ß√µes</h3>
      <p class="observacoes">{{ exame.observacoes }}</p>
    </div>

    <!-- Rodap√© -->
    <div class="exame-footer">
      <p class="disclaimer">
        <strong>Aten√ß√£o:</strong> Este √© um documento oficial. Qualquer rasura invalidar√° o mesmo.
        Em caso de d√∫vidas, procure orienta√ß√£o m√©dica.
      </p>
      <p class="data-impressao">
        Documento gerado em: {{ formatarData(getDataAtual()) }}
      </p>
    </div>
  </div>
</div>
